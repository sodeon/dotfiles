#!/bin/bash

shortcut=$1


#-----------------------------------------------------------------------------------------------
# Support library
#-----------------------------------------------------------------------------------------------
# Argument: class name
isWinActive() {
	xdotool getwindowfocus getwindowpid | xargs -i xdotool search --all --pid {} --class $1
    return $?
}


#-----------------------------------------------------------------------------------------------
# Shortcut implementation
#-----------------------------------------------------------------------------------------------
deleteWord() {
	if isWinActive URxvt; then
		xdotool keyup p key ctrl+w
	else
		xdotool keyup p key ctrl+BackSpace
	fi
}

closeTabOrWindow() {
    if isWinActive Google-chrome || isWinActive Firefox; then
        xte 'keydown Control_L' 'key w' 'keyup Control_L'
    else
        xte 'keydown Alt_L' 'key grave' 'keyup Alt_L'
    fi
}


#-----------------------------------------------------------------------------------------------
# Shortcut assignments
#-----------------------------------------------------------------------------------------------
case $shortcut in
    mod3+p)
        deleteWord
        ;;

    # Mouse
    b:8)
        closeTabOrWindow
        ;;
esac
