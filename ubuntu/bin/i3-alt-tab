#!/bin/bash -e

Alt+Tab and workspace back and forth are used to switch between views. If a view is empty, it is not a useful view. Therefore, defined as invalid view. Do not switch to invalid view.

Functionality:
1. Do not Alt+Tab to empty workspace
2. Workspace "back" and forth will not go to empty workspace

Behavior:
Handle workspace back and forth (F1,F2,F3,...)
Handle Alt+Tab

Algorithm:


# Current workspace (often used, so use short hand notation)
cur=2

readonly defaultWorkspace=2

readonly exist=0
readonly prev=1
readonly next=2

# Bash does not have multi-dimensional array. Use associative array to simulate
declare -A workspaces

# declare -A workspace1=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace2=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace3=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace4=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace5=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace6=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace7=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace8=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace9=(  [exist]=1 [prev]=0 [next]=0 )
# declare -A workspace10=( [exist]=1 [prev]=0 [next]=0 )
# echo ${workspace3[@]}

# workspace() {
#     case $1 in
#         1)  echo ${workspace1[@]};;
#         2)  echo ${workspace2[@]};;
#         3)  echo ${workspace3[@]};;
#         4)  echo ${workspace4[@]};;
#         5)  echo ${workspace5[@]};;
#         6)  echo ${workspace6[@]};;
#         7)  echo ${workspace7[@]};;
#         8)  echo ${workspace8[@]};;
#         9)  echo ${workspace9[@]};;
#         10) echo ${workspace10[@]};;
#         *)  return 1;;
#     esac
# }

# workspaceg=$(workspace $currentWorkspace)
# echo $workspaceg

back-end-forth() {
    last=workspaces[$cur,$prev]
    [[ -z $last ]] && last=$defaultWorkspace

    i3-msg "workspace number $last"
}

focus-handler() {
    new=echo event | jq '.[]'

    workspaces[$cur,$next]=$new

    cur=$new
    workspaces[$cur,$prev]=$cur
    workspaces[$cur,$next]=0
}
